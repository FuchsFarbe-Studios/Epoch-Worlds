@using MaxWidth=MudBlazor.MaxWidth
@using Variant=MudBlazor.Variant
@using MudBlazor
@inherits LayoutComponentBase

<MudThemeProvider Theme="@_theme" />
<MudDialogProvider />
<MudSnackbarProvider />
<FlatThemeProvider />

<MudLayout>
	<MudAppBar Elevation="0" Color="Color.Dark" WrapContent="true">
		<MudIconButton Icon="@(_drawerOpen ? Icons.Material.Filled.MenuOpen : Icons.Material.Filled.Menu)" Variant="@(_drawerOpen ? Variant.Outlined : Variant.Text)" Title="@($"{(_drawerOpen ? "Close" : "Open")} side menu.")" Color="Color.Inherit" Edge="Edge.Start" OnClick="@(e => DrawerToggle())" />
		<AppBar />
	</MudAppBar>

	<MudDrawer @bind-Open="_drawerOpen" ClipMode="DrawerClipMode.Always" Elevation="0" Variant="DrawerVariant.Mini" OpenMiniOnHover="true">
		@*	NavMenu	*@
		<AuthorizeView>
			<CascadingValue Value="@_drawerOpen" Name="IsNavCollapsed">
				<WorldSelector OnWorldChanged="@HandleWorldChanged" OnNewWorldChanged="@HandleNewWorldChanged" />
			</CascadingValue>
		</AuthorizeView>
		<NavMenu IsMudMenu="true" />
	</MudDrawer>

	<MudMainContent>
		<MudContainer MaxWidth="MaxWidth.ExtraExtraLarge" Style="min-height: 100vh;">
			<CascadingValue Value="@_activeWorld">
				<CascadingValue Value="@_newWorld">
					@Body
				</CascadingValue>
			</CascadingValue>
		</MudContainer>
		<footer class="site-footer menu-items-wrapper mud-theme-dark">
			<Footer />
		</footer>
	</MudMainContent>
</MudLayout>