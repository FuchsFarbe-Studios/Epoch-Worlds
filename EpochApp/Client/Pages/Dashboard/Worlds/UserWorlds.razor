@page "/Worlds"
@using FTypo=Flatify.Typo
@using Typo=MudBlazor.Typo
@using MudBlazor
@namespace EpochApp.Client.Pages.Dashboard.Worlds

<PageTitle>@StaticUtils.Constants.AppName - @(Auth.CurrentUser.UserName)'s Worlds</PageTitle>

<FlatTypo Typo="FTypo.Heading3">My Worlds</FlatTypo>

<MudGrid>
	@foreach (var world in _userWorlds)
	{
		<MudItem @key=@world.WorldID xs="12" sm="6" md="4" lg="3">
			<MudCard Outlined="true" Style="min-height: 250px;">
				<MudCardHeader>
					<MudStack>
						<MudText Typo="Typo.h6" Color="@(world.WorldID == ActiveWorld?.WorldID ? Color.Success : Color.Default)">@world.WorldName @($"{(world.WorldID == ActiveWorld?.WorldID ? "(Active)" : "")}")</MudText>
						<MudText Typo="Typo.caption">@world.WorldID</MudText>
					</MudStack>
				</MudCardHeader>
				<MudCardContent>
					<MudText Typo="Typo.body1">@world.Description</MudText>
				</MudCardContent>
				<MudCardActions>
					<MudPaper Outlined="true" Width="100%">
						<MudToolBar>
							<MudIconButton Icon="@Icons.Material.Filled.Edit" OnClick="@(() => Nav.NavigateTo($"{NavRef.WorldNav.Edit}/{world.WorldID}"))" Title="Edit this world." />
							<MudSpacer />
							<MudIconButton Icon="@Icons.Material.Filled.Delete" OnClick="@(async () => await HandleWorldDeletionAsync(world))" Title="Delete world." />
						</MudToolBar>
					</MudPaper>
				</MudCardActions>
			</MudCard>
		</MudItem>
	}
	<MudItem xs="12" sm="6" md="4" lg="3">
		<MudPaper Outlined="true" MinHeight="250px" Width="100%" Class="p-1">
			<MudButton Class="m-auto" Style="height: 240px;" FullWidth="true" Color="Color.Primary" OnClick="@(() => Nav.NavigateTo(NavRef.WorldNav.Create))">Create World</MudButton>
		</MudPaper>
	</MudItem>
</MudGrid>