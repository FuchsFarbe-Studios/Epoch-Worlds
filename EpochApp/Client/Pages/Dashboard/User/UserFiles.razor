@page "/User/Files"
@using Variant=MudBlazor.Variant
@using Typo=MudBlazor.Typo
@using EpochApp.Client.Services
@using MudBlazor

<PageTitle>@StaticUtils.Constants.AppName - @Auth.CurrentUser.UserName - Files</PageTitle>

<MudText Typo="Typo.h3">User Files</MudText>

<MudFileUpload T="IBrowserFile" Accept=".png, .gif, .jpg, .jpeg" FilesChanged="@UpdateUploadedFiles" MaximumFileCount="100">
	<ButtonTemplate>
		<MudButton HtmlTag="label" Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.CloudUpload" for="@context.Id">
			Only .pdf files
		</MudButton>
	</ButtonTemplate>
</MudFileUpload>

@if (_files != null)
{
	<MudList>
		@foreach (var file in _files)
		{
			<MudListItem Icon="@Icons.Material.Filled.AttachFile">
				@file.Name
				<code>@file.Size bytes</code>
			</MudListItem>
		}
	</MudList>
}

@code {
	private IList<IBrowserFile> _files = new List<IBrowserFile>();

	[Inject] private EpochAuthProvider Auth { get; set; }

	private Task UpdateUploadedFiles(IBrowserFile file)
	{
		_files.Add(file);
		return Task.CompletedTask;
	}
}